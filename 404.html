<!DOCTYPE html>
<html>
<head>
  <title>倒计时</title>
</head>
<body>
  <h1 id="countdown">10</h1>

  <script>
    let countdownElement = document.getElementById('countdown');
    let worker = new Worker('countdown.js');

    worker.onmessage = function(event) {
      if (event.data === 'done') {
        window.location.href = "https://czastc.kesug.com";
      } else {
        countdownElement.innerHTML = (event.data / 1000).toFixed(3);
      }
    };

    worker.postMessage('start');
  </script>

  <script>
    let countdownTime = 10000;
    let startTime;

    self.onmessage = function(event) {
      if (event.data === 'start') {
        startTime = new Date().getTime();
        startCountdown();
      }
    };

    function startCountdown() {
      let timer = setInterval(function() {
        let currentTime = new Date().getTime();
        let elapsedTime = currentTime - startTime;
        let remainingTime = Math.max(countdownTime - elapsedTime, 0);

        if (remainingTime <= 0) {
          clearInterval(timer);
          self.postMessage('done');
        } else {
          self.postMessage(remainingTime);
        }
      }, 1);
    }
  </script>
</body>
</html>
